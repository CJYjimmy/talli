{"ast":null,"code":"import _classCallCheck from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chenjiayuan/junior_design/talli/client/src/App.js\";\nimport React, { Component } from 'react';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport theme from './components/Theme';\nimport RoutedApp from './routing/routing';\nimport NavBar from './components/NavBar';\nimport firebase from './firebase';\nimport './App.css';\n/**\n * 'App' serves as a colleciton point of lower components before they\n * are sent off to rendering in index.js\n * This gives us a place to inject routing and theming as well as place\n * components that stay constant throughout the experience, such as the\n * NavBar\n*/\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n    _this.state = {\n      loggedIn: false,\n      user: ''\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var user = sessionStorage.getItem('id') ? {\n        googleId: sessionStorage.getItem('id'),\n        email: sessionStorage.getItem('email'),\n        name: sessionStorage.getItem('name')\n      } : null;\n      this.setState({\n        loggedIn: user ? true : false,\n        user: user\n      });\n    }\n  }, {\n    key: \"onSuccess\",\n    value: function onSuccess(response) {\n      this.setState({\n        loggedIn: true,\n        user: {\n          googleId: response.googleId,\n          email: response.profileObj.email,\n          name: response.profileObj.givenName\n        }\n      });\n      sessionStorage.setItem('id', response.googleId);\n      sessionStorage.setItem('email', response.profileObj.email);\n      sessionStorage.setItem('name', response.profileObj.givenName);\n      var organizer = {\n        email: response.profileObj.email,\n        name: response.profileObj.name\n      };\n      var ref = firebase.database().ref(\"organizer/\".concat(response.profileObj.googleId, \"/organizerData\"));\n      ref.set(organizer);\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      this.setState({\n        loggedIn: false,\n        user: null\n      });\n      sessionStorage.removeItem('id');\n      sessionStorage.removeItem('email');\n      sessionStorage.removeItem('name');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(MuiThemeProvider, {\n        theme: theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        loggedIn: this.state.loggedIn,\n        onSuccess: this.onSuccess.bind(this),\n        logout: this.logout.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(RoutedApp, {\n        onSuccess: this.onSuccess.bind(this),\n        logout: this.logout.bind(this),\n        user: this.state.user,\n        history: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport { App as default };","map":{"version":3,"sources":["/Users/chenjiayuan/junior_design/talli/client/src/App.js"],"names":["React","Component","MuiThemeProvider","theme","RoutedApp","NavBar","firebase","App","state","loggedIn","user","sessionStorage","getItem","googleId","email","name","setState","response","profileObj","givenName","setItem","organizer","ref","database","set","removeItem","onSuccess","bind","logout"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport theme from './components/Theme';\nimport RoutedApp from './routing/routing';\nimport NavBar from './components/NavBar';\nimport firebase from './firebase';\nimport './App.css';\n\n/**\n * 'App' serves as a colleciton point of lower components before they\n * are sent off to rendering in index.js\n * This gives us a place to inject routing and theming as well as place\n * components that stay constant throughout the experience, such as the\n * NavBar\n*/\nexport default class App extends Component {\n    constructor() {\n        super();\n        this.state = {\n            loggedIn: false,\n            user: ''\n        };\n    }\n\n    componentDidMount() {\n        const user = sessionStorage.getItem('id') ? {\n            googleId: sessionStorage.getItem('id'),\n            email: sessionStorage.getItem('email'),\n            name: sessionStorage.getItem('name')\n        } : null;\n        this.setState({\n            loggedIn: user ? true : false,\n            user\n        });\n    }\n\n    onSuccess(response) {\n        this.setState({\n            loggedIn: true,\n            user: {\n                googleId: response.googleId,\n                email: response.profileObj.email,\n                name: response.profileObj.givenName\n            }\n        });\n        sessionStorage.setItem('id', response.googleId);\n        sessionStorage.setItem('email', response.profileObj.email);\n        sessionStorage.setItem('name', response.profileObj.givenName);\n\n        const organizer = {\n            email: response.profileObj.email,\n            name: response.profileObj.name\n        };\n        const ref = firebase.database().ref(`organizer/${response.profileObj.googleId}/organizerData`);\n        ref.set(organizer);\n    }\n\n    logout() {\n        this.setState({\n            loggedIn: false,\n            user: null\n        });\n        sessionStorage.removeItem('id');\n        sessionStorage.removeItem('email');\n        sessionStorage.removeItem('name');\n    }\n\n    render() {\n        return (\n            <MuiThemeProvider theme={theme}>\n                <div>\n                    <NavBar\n                        loggedIn={this.state.loggedIn}\n                        onSuccess={this.onSuccess.bind(this)}\n                        logout={this.logout.bind(this)}\n                    />\n                    <RoutedApp\n                        onSuccess={this.onSuccess.bind(this)}\n                        logout={this.logout.bind(this)}\n                        user={this.state.user}\n                        history={true}\n                    />\n                </div>\n            </MuiThemeProvider>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}