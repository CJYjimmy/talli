{"ast":null,"code":"import _classCallCheck from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chenjiayuan/junior_design/talli/client/src/components/OrganizerView/AddSheet.js\";\nimport React, { Component } from 'react';\nimport openSocket from 'socket.io-client';\nimport { TextField, Typography, Button } from '@material-ui/core';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport ShowError from './Dialogs/ShowError';\nimport '../component_style/AddSheet.css';\n\nvar config = require('../../config.json');\n\nvar socket = openSocket(config.Global.devMode ? \"http://localhost:\".concat(config.Global.serverPort) : \"\".concat(config.Global.sslEnabled ? 'https' : 'http', \"://\").concat(config.Global.hostURL));\n\nvar NewEntryForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewEntryForm, _Component);\n\n  function NewEntryForm(props) {\n    var _this;\n\n    _classCallCheck(this, NewEntryForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewEntryForm).call(this, props));\n\n    _this.handleError = function (message) {\n      _this.errorChild.current.handleOpen(message);\n\n      if (message === 'Could not get sheet information' || message === 'Error with sheet authentication') {\n        _this.setState({\n          sheetURL: _this.state.sheetURL,\n          urlConfirm: false\n        });\n      }\n    };\n\n    _this.handleSkip = function () {\n      _this.props.handler(_this.props.orgViews.VIEW);\n    };\n\n    _this.handleSubmit = function (e) {\n      // url check and next page if successful\n      e.preventDefault();\n      socket.emit('send_url', {\n        url: _this.state.sheetURL,\n        googleId: _this.props.user.googleId,\n        eventId: _this.props.curEvent\n      });\n    };\n\n    _this.keyPress = function (e) {\n      if (e.key === 'Enter') {\n        _this.handleSubmit();\n      }\n    };\n\n    _this.handleURLChange = function (e) {\n      var newURL = e.target.value;\n\n      _this.setState({\n        sheetURL: newURL,\n        urlConfirm: _this.state.urlConfirm\n      });\n    };\n\n    _this.state = {\n      sheetURL: '',\n      urlConfirm: false\n    };\n    _this.errorChild = React.createRef();\n    return _this;\n  }\n\n  _createClass(NewEntryForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      socket.on('error', function (data) {\n        console.log(data.error);\n\n        _this2.handleError(data.error);\n      });\n      socket.on('url_confirm', function () {\n        _this2.setState({\n          sheetURL: _this2.state.sheetURL,\n          urlConfirm: true\n        }, function () {\n          _this2.props.handler(_this2.props.orgViews.VIEW);\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(ShowError, {\n        ref: this.errorChild,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"addSheet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Set Up Your Results\"), React.createElement(\"div\", {\n        className: \"instructions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        id: \"itemTitle\",\n        variant: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Google Sheet Export\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"1. Create a Google Sheet in your desired location\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"2. Share the spreadsheet with editing rights with:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"talli-455@talli-229017.iam.gserviceaccount.com\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"3. Grab the spreadsheet's URL and paste it here:\", React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"urlField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"standard-dense\",\n        label: \"Spreadsheet URL\",\n        margin: \"dense\",\n        className: \"sheetURL\",\n        value: this.state.sheetURL,\n        onKeyDown: this.keyPress,\n        onChange: this.handleURLChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), this.state.urlConfirm && React.createElement(CheckCircle, {\n        id: \"checkmark\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"default\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Submit\")))), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"default\",\n        className: \"buttons\",\n        onClick: this.handleSkip,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Skip\")));\n    }\n  }]);\n\n  return NewEntryForm;\n}(Component);\n\nexport { NewEntryForm as default };","map":{"version":3,"sources":["/Users/chenjiayuan/junior_design/talli/client/src/components/OrganizerView/AddSheet.js"],"names":["React","Component","openSocket","TextField","Typography","Button","CheckCircle","ShowError","config","require","socket","Global","devMode","serverPort","sslEnabled","hostURL","NewEntryForm","props","handleError","message","errorChild","current","handleOpen","setState","sheetURL","state","urlConfirm","handleSkip","handler","orgViews","VIEW","handleSubmit","e","preventDefault","emit","url","googleId","user","eventId","curEvent","keyPress","key","handleURLChange","newURL","target","value","createRef","on","data","console","log","error"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport openSocket from 'socket.io-client';\nimport { TextField, Typography, Button } from '@material-ui/core';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport ShowError from './Dialogs/ShowError';\nimport '../component_style/AddSheet.css';\n\nconst config = require('../../config.json');\n\nconst socket = openSocket(\n    (config.Global.devMode ?\n        `http://localhost:${config.Global.serverPort}` :\n        `${(config.Global.sslEnabled ? 'https' : 'http')}://${config.Global.hostURL}`\n    )\n);\n\nexport default class NewEntryForm extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            sheetURL: '',\n            urlConfirm: false,\n        };\n        this.errorChild = React.createRef();\n    }\n\n    componentDidMount() {\n        socket.on('error', (data) => {\n            console.log(data.error);\n            this.handleError(data.error);\n        });\n\n        socket.on('url_confirm', () => {\n            this.setState({\n                sheetURL: this.state.sheetURL,\n                urlConfirm: true,\n            }, () => {\n                this.props.handler(this.props.orgViews.VIEW);\n            });\n        });\n    }\n\n    handleError = (message) => {\n        this.errorChild.current.handleOpen(message);\n        if (message === 'Could not get sheet information' || message === 'Error with sheet authentication') {\n            this.setState({\n                sheetURL: this.state.sheetURL,\n                urlConfirm: false,\n            });\n        }\n    }\n\n    handleSkip = () => {\n        this.props.handler(this.props.orgViews.VIEW);\n    }\n\n    handleSubmit = (e) => {\n        // url check and next page if successful\n        e.preventDefault();\n        socket.emit('send_url', {\n            url: this.state.sheetURL,\n            googleId: this.props.user.googleId,\n            eventId: this.props.curEvent\n        });\n    }\n\n    keyPress = (e) => {\n        if (e.key === 'Enter') {\n            this.handleSubmit();\n        }\n    }\n\n    handleURLChange = (e) => {\n        const newURL = e.target.value;\n        this.setState({\n            sheetURL: newURL,\n            urlConfirm: this.state.urlConfirm\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"main\">\n                <div>\n                    <ShowError ref={this.errorChild} />\n                </div>\n                <div className=\"addSheet\">\n                    <Typography variant=\"h4\">Set Up Your Results</Typography>\n                    <div className=\"instructions\">\n                        <Typography id=\"itemTitle\" variant=\"h5\">Google Sheet Export</Typography>\n                        <div>1. Create a Google Sheet in your desired location</div>\n                        <div>\n                            2. Share the spreadsheet with editing rights with:\n                        <br />\n                            <div className=\"main\">\n                                <b>talli-455@talli-229017.iam.gserviceaccount.com</b>\n                            </div>\n                        </div>\n                        <div>\n                            3. Grab the spreadsheet&apos;s URL and paste it here:\n                            <div className=\"main\">\n                                <div className=\"urlField\">\n                                    <TextField\n                                        id=\"standard-dense\"\n                                        label=\"Spreadsheet URL\"\n                                        margin=\"dense\"\n                                        className=\"sheetURL\"\n                                        value={this.state.sheetURL}\n                                        onKeyDown={this.keyPress}\n                                        onChange={this.handleURLChange}\n                                    />\n                                    {\n                                        this.state.urlConfirm &&\n                                        <CheckCircle id=\"checkmark\" color=\"primary\" />\n                                    }\n                                    <br />\n                                </div>\n                                <Button variant=\"contained\" size=\"small\" color=\"default\" onClick={this.handleSubmit}>\n                                    Submit\n                                </Button>\n                            </div>\n                        </div>\n                    </div>\n                    <Button variant=\"contained\" color=\"default\" className=\"buttons\" onClick={this.handleSkip}>Skip</Button>\n                </div>\n            </div>\n\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}