{"ast":null,"code":"import _classCallCheck from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chenjiayuan/junior_design/talli/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chenjiayuan/junior_design/talli/client/src/components/OrganizerView/ViewEvent.js\";\nimport React, { Component } from 'react';\nimport { Typography, Button, TextField, Tooltip } from '@material-ui/core';\nimport openSocket from 'socket.io-client';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport firebase from '../../firebase';\nimport ExportOrgData from './Dialogs/ExportOrgData';\nimport EditEntries from './Dialogs/EditEntries';\nimport EditEvent from './Dialogs/EditEvent';\nimport EditVoting from './Dialogs/EditVoting';\nimport AddEntries from './Dialogs/AddEntries';\nimport EditWeights from './Dialogs/EditWeights';\nimport AddBallot from './Dialogs/AddBallot';\nimport ShowError from './Dialogs/ShowError';\nimport ConfirmFinalize from './Dialogs/ConfirmFinalize';\nimport '../component_style/ViewEvent.css';\n\nvar config = require('../../config.json');\n\nvar socket = openSocket(config.Global.devMode ? \"http://localhost:\".concat(config.Global.serverPort) : \"\".concat(config.Global.sslEnabled ? \"https\" : \"http\", \"://\").concat(config.Global.hostURL));\n/**\n * OrganizerView > ViewEvent\n * Allows organizers to view the details of an event\n * that they have already created.\n */\n\nvar ViewEvent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ViewEvent, _Component);\n\n  function ViewEvent(props) {\n    var _this;\n\n    _classCallCheck(this, ViewEvent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewEvent).call(this, props));\n\n    _this.handleExport = function () {\n      _this.exportChild.current.handleOpen();\n    };\n\n    _this.handleOpenEntries = function () {\n      _this.setState({\n        view: 'entries',\n        event: _this.state.event\n      });\n    };\n\n    _this.handleAddEntry = function () {\n      _this.addChild.current.handleOpen();\n    };\n\n    _this.handleEventEdit = function () {\n      _this.eventChild.current.handleOpen();\n    };\n\n    _this.handleOpenCloseVoting = function () {\n      _this.votingChild.current.handleOpen();\n    };\n\n    _this.handleWeights = function () {\n      _this.weightsChild.current.handleOpen();\n    };\n\n    _this.handleError = function (message) {\n      if (_this.state.view === \"results\") {\n        _this.errorChild.current.handleOpen(message);\n      }\n\n      if (message === \"Could not get sheet information\" || message === \"Error with sheet authentication\") {\n        _this.setState({\n          view: _this.state.view,\n          event: _this.state.event,\n          urlConfirm: false\n        });\n      }\n    };\n\n    _this.handleAddVote = function () {\n      _this.addVoteChild.current.handleOpen();\n    };\n\n    _this.goBack = function () {\n      if (_this.state.view === 'main' || _this.state.view === 'results') {\n        _this.props.handler(_this.props.orgViews.MAIN);\n      } else if (_this.state.view === 'entries') {\n        _this.setState({\n          view: 'main',\n          event: _this.state.event\n        });\n      }\n    };\n\n    _this.viewResults = function () {\n      _this.setState({\n        view: 'results'\n      });\n    };\n\n    _this.manageEvent = function () {\n      _this.setState({\n        view: 'main'\n      });\n    };\n\n    _this.finalizeConfirm = function () {\n      _this.finalizeChild.current.handleOpen();\n    };\n\n    _this.finalizeResults = function () {\n      socket.emit('finalize_results', {\n        googleId: _this.props.user.googleId,\n        eventId: _this.state.event.id\n      });\n    };\n\n    _this.handleURLChange = function (e) {\n      e.preventDefault();\n      var newEvent = _this.state.event;\n      newEvent.sheetURL = e.target.value;\n\n      _this.setState({\n        view: _this.state.view,\n        event: newEvent\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      socket.emit('send_url', {\n        url: _this.state.event.sheetURL,\n        googleId: _this.props.user.googleId,\n        eventId: _this.state.event.id\n      });\n    };\n\n    _this.sendEntries = function () {\n      socket.emit('send_entries', {\n        googleId: _this.props.user.googleId,\n        eventId: _this.state.event.id,\n        entries: _this.state.event.entries\n      });\n    };\n\n    _this.refreshStats = function () {\n      firebase.database().ref(\"event/\".concat(_this.state.event.id, \"/\")).once('value').then(function (snap) {\n        var event = snap.val();\n        var totalBallots = 0;\n        if (event.attendees) totalBallots += Object.keys(event.attendees).length;\n        if (event.manual) totalBallots += Object.keys(event.manual).length;\n        var totalSubmitted = 0;\n        var topVotes = {};\n        var sortVotes = [];\n\n        if (event.attendees) {\n          for (var user in event.attendees) {\n            if (event.attendees[user].submitted) {\n              totalSubmitted += 1;\n            }\n\n            var rankings = event.attendees[user].rankings;\n            topVotes = _this.getTopVotes(topVotes, rankings);\n          }\n        }\n\n        if (event.manual) {\n          for (var _user in event.manual) {\n            totalSubmitted += 1;\n            var _rankings = event.manual[_user];\n            topVotes = _this.getTopVotes(topVotes, _rankings);\n          }\n        }\n\n        for (var ballot in topVotes) {\n          sortVotes.push([ballot, topVotes[ballot]]);\n        }\n\n        sortVotes.sort(function (a, b) {\n          return b[1] - a[1];\n        });\n        var entries = _this.state.event.entries;\n        var topThree = {\n          first: entries && sortVotes[0][0] ? entries[sortVotes[0][0]].title : '',\n          second: entries && sortVotes[1][0] ? entries[sortVotes[1][0]].title : '',\n          third: entries && sortVotes[2][0] ? entries[sortVotes[2][0]].title : ''\n        };\n\n        _this.setState({\n          totalBallots: totalBallots,\n          totalSubmitted: totalSubmitted,\n          topThree: topThree\n        });\n      });\n    };\n\n    _this.state = {\n      view: 'main',\n      event: {\n        id: '',\n        name: '',\n        location: '',\n        startDate: '',\n        endDate: '',\n        automate: false,\n        startVote: '',\n        endVote: '',\n        sheetURL: 'Google Sheet URL',\n        entries: []\n      },\n      urlConfirm: false\n    };\n    _this.exportChild = React.createRef();\n    _this.eventChild = React.createRef();\n    _this.entryChild = React.createRef();\n    _this.addChild = React.createRef();\n    _this.votingChild = React.createRef();\n    _this.weightsChild = React.createRef();\n    _this.addVoteChild = React.createRef();\n    _this.errorChild = React.createRef();\n    _this.finalizeChild = React.createRef();\n    return _this;\n  }\n\n  _createClass(ViewEvent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var googleId = this.props.user.googleId;\n      var query = firebase.database().ref(\"organizer/\".concat(googleId, \"/event\"));\n      query.on('value', function (snapshot) {\n        var events = snapshot.val();\n\n        if (events && events[_this2.props.curEvent]) {\n          var eventBase = events[_this2.props.curEvent].eventData;\n          var eventEntries = events[_this2.props.curEvent].entries;\n\n          _this2.setState({\n            view: _this2.state.view,\n            event: {\n              id: eventBase.id,\n              name: eventBase.name,\n              location: eventBase.location,\n              startDate: eventBase.startDate,\n              endDate: eventBase.endDate,\n              automate: eventBase.automate,\n              startVote: eventBase.startVote,\n              endVote: eventBase.endVote,\n              sheetURL: eventBase.sheetURL,\n              entries: eventEntries,\n              weights: eventBase.weights\n            },\n            urlConfirm: _this2.state.urlConfirm,\n            totalBallots: 0,\n            totalSubmitted: 0,\n            topThree: {\n              first: '',\n              second: '',\n              third: ''\n            }\n          }, function () {\n            _this2.refreshStats();\n\n            socket.emit('send_url', {\n              url: _this2.state.event.sheetURL,\n              googleId: _this2.props.user.googleId,\n              eventId: _this2.state.event.id\n            });\n          });\n        }\n      });\n      socket.on('error', function (data) {\n        console.log(data.error);\n\n        _this2.handleError(data.error);\n      });\n      socket.on('url_confirm', function () {\n        _this2.setState({\n          view: _this2.state.view,\n          event: _this2.state.event,\n          urlConfirm: true\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      socket.removeAllListeners();\n    }\n  }, {\n    key: \"handleEntryEdit\",\n    value: function handleEntryEdit(entryID) {\n      this.entryChild.current.handleOpen(entryID);\n    }\n  }, {\n    key: \"keyPress\",\n    value: function keyPress(e) {\n      if (e.key === 'Enter') {\n        this.handleSubmit();\n      }\n    }\n  }, {\n    key: \"getTopVotes\",\n    value: function getTopVotes(topVotes, rankings) {\n      var words = ['first', 'second', 'third'];\n      var newTop = topVotes;\n\n      for (var i = 1; i <= 3; i++) {\n        if (rankings[i]) {\n          if (!newTop[rankings[i].id]) newTop[rankings[i].id] = 0;\n          newTop[rankings[i].id] += this.state.event.weights[words[i - 1]];\n        }\n      }\n\n      return newTop;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, this.props.user != null && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(ExportOrgData, {\n        ref: this.exportChild,\n        event: this.state.event,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }), React.createElement(EditEntries, {\n        ref: this.entryChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }), React.createElement(ConfirmFinalize, {\n        ref: this.finalizeChild,\n        handler: this.finalizeResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }), React.createElement(AddEntries, {\n        ref: this.addChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }), React.createElement(EditEvent, {\n        ref: this.eventChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        handler: this.props.handler,\n        orgViews: this.props.orgViews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }), React.createElement(AddBallot, {\n        ref: this.addVoteChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }), React.createElement(EditVoting, {\n        ref: this.votingChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }), React.createElement(EditWeights, {\n        ref: this.weightsChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }), React.createElement(ShowError, {\n        ref: this.errorChild,\n        event: this.state.event,\n        googleId: this.props.googleID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        variant: \"h3\",\n        align: \"center\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, this.state.event.name)), this.state.view === 'main' && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleExport,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, \"Export Event & Entry QR Codes\"), React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleOpenEntries,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, \"View/Add/Edit Entries\"), React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleEventEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, \"View/Edit Event Details\"), React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleOpenCloseVoting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, \"Open/Close Voting\"))), this.state.view === 'entries' && this.state.event.entries !== undefined && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, Object.values(this.state.event.entries).map(function (entry, index) {\n        return React.createElement(Button, {\n          key: entry.id,\n          className: \"listButtons\",\n          onClick: function onClick() {\n            return _this3.handleEntryEdit(entry.id);\n          },\n          index: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 336\n          },\n          __self: this\n        }, entry.title, \" by \", entry.presenters);\n      }), React.createElement(Button, {\n        className: \"listButtons\",\n        color: \"primary\",\n        onClick: this.handleAddEntry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, \"Add New Entry\"))), this.state.view === 'entries' && this.state.event.entries === undefined && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        color: \"primary\",\n        onClick: this.handleAddEntry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, \"Add New Entry\"))), this.state.view === \"results\" && React.createElement(\"div\", {\n        className: \"viewResults\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"saveItems\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sheetsExport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"instructions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        id: \"itemTitle\",\n        variant: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, \"Set Up Your Results\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, \"1. Create a Google Sheet in your desired location\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, \"2. Share the spreadsheet with editing rights with:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"talli-455@talli-229017.iam.gserviceaccount.com\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, \"3. Grab the spreadsheet's URL and paste it here:\", React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"urlField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"standard-dense\",\n        label: \"Spreadsheet URL\",\n        margin: \"dense\",\n        className: \"sheetURL\",\n        value: this.state.event.sheetURL,\n        onKeyDown: this.keyPress,\n        onChange: this.handleURLChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }), this.state.urlConfirm && React.createElement(CheckCircle, {\n        id: \"checkmark\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"default\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, \"Submit\")))), React.createElement(\"div\", {\n        className: \"statistics\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        id: \"itemTitle\",\n        variant: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412\n        },\n        __self: this\n      }, \"Voting Statistics\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413\n        },\n        __self: this\n      }, \"Total Ballots: \", this.state.totalBallots), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      }, \"Submitted Ballots: \", this.state.totalSubmitted), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }, \"Current Top 3:\", React.createElement(\"div\", {\n        id: \"top3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, \"1. \", this.state.topThree.first), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, \"2. \", this.state.topThree.second), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, \"3. \", this.state.topThree.third))), React.createElement(\"div\", {\n        className: \"refreshButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"default\",\n        onClick: this.refreshStats,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424\n        },\n        __self: this\n      }, \"Refresh Statistics\")))), React.createElement(\"div\", {\n        className: \"bottomMenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Updates linked google sheet with current list of entries. It's best to do this before the event starts!\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.sendEntries,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, \"Sync entries\"))), React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Adjust the weights applied to first, second, and third place votes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleWeights,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, \"Apply Custom Weights\"))), React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Manually add a ballot to the results.\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleAddVote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }, \"Add Vote\"))), React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Updates linked google sheet with all voting ballots submitted or manually entered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.finalizeConfirm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }, \"Finalize Results\")))))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        className: \"buttons\",\n        type: \"button\",\n        onClick: this.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474\n        },\n        __self: this\n      }, \"Back\"));\n    }\n  }]);\n\n  return ViewEvent;\n}(Component);\n\nexport { ViewEvent as default };","map":{"version":3,"sources":["/Users/chenjiayuan/junior_design/talli/client/src/components/OrganizerView/ViewEvent.js"],"names":["React","Component","Typography","Button","TextField","Tooltip","openSocket","CheckCircle","firebase","ExportOrgData","EditEntries","EditEvent","EditVoting","AddEntries","EditWeights","AddBallot","ShowError","ConfirmFinalize","config","require","socket","Global","devMode","serverPort","sslEnabled","hostURL","ViewEvent","props","handleExport","exportChild","current","handleOpen","handleOpenEntries","setState","view","event","state","handleAddEntry","addChild","handleEventEdit","eventChild","handleOpenCloseVoting","votingChild","handleWeights","weightsChild","handleError","message","errorChild","urlConfirm","handleAddVote","addVoteChild","goBack","handler","orgViews","MAIN","viewResults","manageEvent","finalizeConfirm","finalizeChild","finalizeResults","emit","googleId","user","eventId","id","handleURLChange","e","preventDefault","newEvent","sheetURL","target","value","handleSubmit","url","sendEntries","entries","refreshStats","database","ref","once","then","snap","val","totalBallots","attendees","Object","keys","length","manual","totalSubmitted","topVotes","sortVotes","submitted","rankings","getTopVotes","ballot","push","sort","a","b","topThree","first","title","second","third","name","location","startDate","endDate","automate","startVote","endVote","createRef","entryChild","query","on","snapshot","events","curEvent","eventBase","eventData","eventEntries","weights","data","console","log","error","removeAllListeners","entryID","key","words","newTop","i","googleID","undefined","values","map","entry","index","handleEntryEdit","presenters","keyPress"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Typography, Button, TextField, Tooltip } from '@material-ui/core';\nimport openSocket from 'socket.io-client';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport firebase from '../../firebase';\nimport ExportOrgData from './Dialogs/ExportOrgData';\nimport EditEntries from './Dialogs/EditEntries';\nimport EditEvent from './Dialogs/EditEvent';\nimport EditVoting from './Dialogs/EditVoting';\nimport AddEntries from './Dialogs/AddEntries';\nimport EditWeights from './Dialogs/EditWeights';\nimport AddBallot from './Dialogs/AddBallot';\nimport ShowError from './Dialogs/ShowError';\nimport ConfirmFinalize from './Dialogs/ConfirmFinalize';\nimport '../component_style/ViewEvent.css';\n\nconst config = require('../../config.json');\n\nconst socket = openSocket(\n    (config.Global.devMode ?\n        `http://localhost:${config.Global.serverPort}` :\n        `${(config.Global.sslEnabled ? \"https\" : \"http\")}://${config.Global.hostURL}`\n    )\n);\n\n/**\n * OrganizerView > ViewEvent\n * Allows organizers to view the details of an event\n * that they have already created.\n */\nexport default class ViewEvent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            view: 'main',\n            event: {\n                id: '',\n                name: '',\n                location: '',\n                startDate: '',\n                endDate: '',\n                automate: false,\n                startVote: '',\n                endVote: '',\n                sheetURL: 'Google Sheet URL',\n                entries: []\n            },\n            urlConfirm: false,\n        };\n        this.exportChild = React.createRef();\n        this.eventChild = React.createRef();\n        this.entryChild = React.createRef();\n        this.addChild = React.createRef();\n        this.votingChild = React.createRef();\n        this.weightsChild = React.createRef();\n        this.addVoteChild = React.createRef();\n        this.errorChild = React.createRef();\n        this.finalizeChild = React.createRef();\n    }\n\n    componentDidMount() {\n        const googleId = this.props.user.googleId;\n        const query = firebase.database().ref(`organizer/${googleId}/event`);\n        query.on('value', (snapshot) => {\n            const events = snapshot.val();\n            if (events && events[this.props.curEvent]) {\n                const eventBase = events[this.props.curEvent].eventData;\n                const eventEntries = events[this.props.curEvent].entries;\n                this.setState({\n                    view: this.state.view,\n                    event: {\n                        id: eventBase.id,\n                        name: eventBase.name,\n                        location: eventBase.location,\n                        startDate: eventBase.startDate,\n                        endDate: eventBase.endDate,\n                        automate: eventBase.automate,\n                        startVote: eventBase.startVote,\n                        endVote: eventBase.endVote,\n                        sheetURL: eventBase.sheetURL,\n                        entries: eventEntries,\n                        weights: eventBase.weights\n                    },\n                    urlConfirm: this.state.urlConfirm,\n                    totalBallots: 0,\n                    totalSubmitted: 0,\n                    topThree: {\n                        first: '',\n                        second: '',\n                        third: ''\n                    }\n                }, () => {\n                    this.refreshStats();\n                    socket.emit('send_url', {\n                        url: this.state.event.sheetURL,\n                        googleId: this.props.user.googleId,\n                        eventId: this.state.event.id,\n                    });\n                });\n            }\n        });\n\n        socket.on('error', (data) => {\n            console.log(data.error);\n            this.handleError(data.error);\n        });\n\n        socket.on('url_confirm', () => {\n            this.setState({\n                view: this.state.view,\n                event: this.state.event,\n                urlConfirm: true,\n            });\n        });\n    }\n\n    componentWillUnmount() {\n        socket.removeAllListeners();\n    }\n\n    handleExport = () => {\n        this.exportChild.current.handleOpen();\n    }\n\n    handleEntryEdit(entryID) {\n        this.entryChild.current.handleOpen(entryID);\n    }\n\n    handleOpenEntries = () => {\n        this.setState({\n            view: 'entries',\n            event: this.state.event\n        });\n    }\n\n    handleAddEntry = () => {\n        this.addChild.current.handleOpen();\n    }\n\n    handleEventEdit = () => {\n        this.eventChild.current.handleOpen();\n    }\n\n    handleOpenCloseVoting = () => {\n        this.votingChild.current.handleOpen();\n    }\n\n    handleWeights = () => {\n        this.weightsChild.current.handleOpen();\n    }\n\n    handleError = (message) => {\n        if (this.state.view === \"results\") {\n            this.errorChild.current.handleOpen(message);\n        }\n        if (message === \"Could not get sheet information\" || message === \"Error with sheet authentication\") {\n            this.setState({\n                view: this.state.view,\n                event: this.state.event,\n                urlConfirm: false,\n            });\n        }\n    }\n\n    handleAddVote = () => {\n        this.addVoteChild.current.handleOpen();\n    }\n\n    goBack = () => {\n        if (this.state.view === 'main' || this.state.view === 'results') {\n            this.props.handler(this.props.orgViews.MAIN);\n        } else if (this.state.view === 'entries') {\n            this.setState({\n                view: 'main',\n                event: this.state.event\n            });\n        }\n    }\n\n    viewResults = () => {\n        this.setState({\n            view: 'results'\n        });\n    }\n\n    manageEvent = () => {\n        this.setState({\n            view: 'main'\n        });\n    }\n\n    finalizeConfirm = () => {\n        this.finalizeChild.current.handleOpen();\n    }\n\n    finalizeResults = () => {\n        socket.emit('finalize_results', {\n            googleId: this.props.user.googleId,\n            eventId: this.state.event.id\n        });\n    }\n\n    keyPress(e) {\n        if (e.key === 'Enter') {\n            this.handleSubmit();\n        }\n    }\n\n    handleURLChange = (e) => {\n        e.preventDefault();\n        const newEvent = this.state.event;\n        newEvent.sheetURL = e.target.value;\n        this.setState({\n            view: this.state.view,\n            event: newEvent\n        });\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        socket.emit('send_url', {\n            url: this.state.event.sheetURL,\n            googleId: this.props.user.googleId,\n            eventId: this.state.event.id,\n        });\n    }\n\n    sendEntries = () => {\n        socket.emit('send_entries', {\n            googleId: this.props.user.googleId,\n            eventId: this.state.event.id,\n            entries: this.state.event.entries\n        });\n    }\n\n    getTopVotes(topVotes, rankings) {\n        const words = ['first', 'second', 'third'];\n        const newTop = topVotes;\n        for (let i = 1; i <= 3; i++) {\n            if (rankings[i]) {\n                if (!newTop[rankings[i].id]) newTop[rankings[i].id] = 0;\n                newTop[rankings[i].id] += this.state.event.weights[words[i - 1]];\n            }\n        }\n        return newTop;\n    }\n\n    refreshStats = () => {\n        firebase.database().ref(`event/${this.state.event.id}/`).once('value').then(snap => {\n            const event = snap.val();\n            let totalBallots = 0;\n            if (event.attendees) totalBallots += Object.keys(event.attendees).length;\n            if (event.manual) totalBallots += Object.keys(event.manual).length;\n            let totalSubmitted = 0;\n            let topVotes = {};\n            const sortVotes = [];\n            if (event.attendees) {\n                for (let user in event.attendees) {\n                    if (event.attendees[user].submitted) {\n                        totalSubmitted += 1;\n                    }\n                    const rankings = event.attendees[user].rankings;\n                    topVotes = this.getTopVotes(topVotes, rankings);\n                }\n            }\n            if (event.manual) {\n                for (let user in event.manual) {\n                    totalSubmitted += 1;\n                    const rankings = event.manual[user];\n                    topVotes = this.getTopVotes(topVotes, rankings);\n                }\n            }\n            for (let ballot in topVotes) {\n                sortVotes.push([ballot, topVotes[ballot]]);\n            }\n            sortVotes.sort((a, b) => b[1] - a[1]);\n            const { entries } = this.state.event;\n            const topThree = {\n                first: (entries && sortVotes[0][0]) ? entries[sortVotes[0][0]].title : '',\n                second: (entries && sortVotes[1][0]) ? entries[sortVotes[1][0]].title : '',\n                third: (entries && sortVotes[2][0]) ? entries[sortVotes[2][0]].title : '',\n            };\n            this.setState({\n                totalBallots,\n                totalSubmitted,\n                topThree\n            });\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"main\">\n                {\n                    this.props.user != null && (\n                        <div>\n                            <ExportOrgData ref={this.exportChild} event={this.state.event} />\n                            <EditEntries ref={this.entryChild} event={this.state.event} googleId={this.props.user.googleId} />\n                            <ConfirmFinalize ref={this.finalizeChild} handler={this.finalizeResults} />\n                            <AddEntries ref={this.addChild} event={this.state.event} googleId={this.props.user.googleId} />\n                            <EditEvent ref={this.eventChild} event={this.state.event} googleId={this.props.user.googleId} handler={this.props.handler} orgViews={this.props.orgViews} />\n                            <AddBallot ref={this.addVoteChild} event={this.state.event} googleId={this.props.user.googleId} />\n                            <EditVoting ref={this.votingChild} event={this.state.event} googleId={this.props.user.googleId} />\n                            <EditWeights ref={this.weightsChild} event={this.state.event} googleId={this.props.user.googleId} />\n                            <ShowError ref={this.errorChild} event={this.state.event} googleId={this.props.googleID} />\n                            <Typography variant=\"h3\" align=\"center\" gutterBottom>{this.state.event.name}</Typography>\n                        </div>\n                    )\n                }\n                {\n                    this.state.view === 'main' && (\n                        <div>\n                            <div className=\"options\">\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.manageEvent}>Manage Event</Button>\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.viewResults}>View Results</Button>\n                            </div>\n                            <div className=\"box\">\n                                <Button className=\"listButtons\" onClick={this.handleExport}>Export Event & Entry QR Codes</Button>\n                                <Button className=\"listButtons\" onClick={this.handleOpenEntries}>View/Add/Edit Entries</Button>\n                                <Button className=\"listButtons\" onClick={this.handleEventEdit}>View/Edit Event Details</Button>\n                                <Button className=\"listButtons\" onClick={this.handleOpenCloseVoting}>Open/Close Voting</Button>\n                            </div>\n                        </div>\n                    )\n                }\n                {\n                    this.state.view === 'entries' && this.state.event.entries !== undefined && (\n                        <div>\n                            <div className=\"options\">\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.manageEvent}>Manage Event</Button>\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.viewResults}>View Results</Button>\n                            </div>\n                            <div className=\"box\">\n                                {\n                                    Object.values(this.state.event.entries).map((entry, index) => (\n                                        <Button\n                                            key={entry.id}\n                                            className=\"listButtons\"\n                                            onClick={() => this.handleEntryEdit(entry.id)}\n                                            index={index}\n                                        >\n                                            {entry.title} by {entry.presenters}\n                                        </Button>\n                                    ))\n                                }\n                                <Button className=\"listButtons\" color=\"primary\" onClick={this.handleAddEntry}>Add New Entry</Button>\n                            </div>\n                        </div>\n                    )\n                }\n                {\n                    this.state.view === 'entries' && this.state.event.entries === undefined && (\n                        <div>\n                            <div className=\"options\">\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.manageEvent}>Manage Event</Button>\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.viewResults}>View Results</Button>\n                            </div>\n                            <div className=\"box\">\n                                <Button className=\"listButtons\" color=\"primary\" onClick={this.handleAddEntry}>Add New Entry</Button>\n                            </div>\n                        </div>\n                    )\n                }\n                {\n                    this.state.view === \"results\" && (\n                        <div className=\"viewResults\">\n                            <div className=\"options\">\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.manageEvent}>Manage Event</Button>\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.viewResults}>View Results</Button>\n                            </div>\n                            <br />\n                            <div className=\"saveItems\">\n                                <div className=\"sheetsExport\">\n                                    <div className=\"instructions\">\n                                        <Typography id=\"itemTitle\" variant=\"h5\">Set Up Your Results</Typography>\n                                        <div>1. Create a Google Sheet in your desired location</div>\n                                        <div>\n                                            2. Share the spreadsheet with editing rights with:\n                                        <br />\n                                            <div className=\"main\">\n                                                <b>talli-455@talli-229017.iam.gserviceaccount.com</b>\n                                            </div>\n                                        </div>\n                                        <div>\n                                            3. Grab the spreadsheet&apos;s URL and paste it here:\n                                            <div className=\"main\">\n                                                <div className=\"urlField\">\n                                                    <TextField\n                                                        id=\"standard-dense\"\n                                                        label=\"Spreadsheet URL\"\n                                                        margin=\"dense\"\n                                                        className=\"sheetURL\"\n                                                        value={this.state.event.sheetURL}\n                                                        onKeyDown={this.keyPress}\n                                                        onChange={this.handleURLChange}\n                                                    />\n                                                    {\n                                                        this.state.urlConfirm &&\n                                                        <CheckCircle id=\"checkmark\" color=\"primary\" />\n                                                    }\n                                                    <br />\n                                                </div>\n                                                <Button variant=\"contained\" size=\"small\" color=\"default\" onClick={this.handleSubmit}>\n                                                    Submit\n                                                </Button>\n                                            </div>\n                                        </div>\n                                    </div>\n\n\n                                    <div className=\"statistics\">\n                                        <Typography id=\"itemTitle\" variant=\"h5\">Voting Statistics</Typography>\n                                        <div>Total Ballots: {this.state.totalBallots}</div>\n                                        <div>Submitted Ballots: {this.state.totalSubmitted}</div>\n                                        <div>\n                                            Current Top 3:\n                                            <div id=\"top3\">\n                                                <div>1. {this.state.topThree.first}</div>\n                                                <div>2. {this.state.topThree.second}</div>\n                                                <div>3. {this.state.topThree.third}</div>\n                                            </div>\n                                        </div>\n                                        <div className=\"refreshButton\">\n                                            <Button variant=\"contained\" size=\"small\" color=\"default\" onClick={this.refreshStats}>\n                                                Refresh Statistics\n                                            </Button>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"bottomMenu\">\n                                    <div className=\"resultsOption\">\n                                        <Tooltip\n                                            title=\"Updates linked google sheet with current list of entries. It's best to do this before the event starts!\"\n                                            placement=\"bottom\"\n                                        >\n                                            <Button className=\"listButtons\" onClick={this.sendEntries}>\n                                                Sync entries\n                                            </Button>\n                                        </Tooltip>\n                                    </div>\n                                    <div className=\"resultsOption\">\n                                        <Tooltip\n                                            title=\"Adjust the weights applied to first, second, and third place votes\"\n                                        >\n                                            <Button className=\"listButtons\" onClick={this.handleWeights}>Apply Custom Weights</Button>\n                                        </Tooltip>\n                                    </div>\n                                    <div className=\"resultsOption\">\n                                        <Tooltip\n                                            title=\"Manually add a ballot to the results.\"\n                                            placement=\"bottom\"\n                                        >\n                                            <Button className=\"listButtons\" onClick={this.handleAddVote}>\n                                                Add Vote\n                                            </Button>\n                                        </Tooltip>\n                                    </div>\n                                    <div className=\"resultsOption\">\n                                        <Tooltip\n                                            title=\"Updates linked google sheet with all voting ballots submitted or manually entered\"\n                                        >\n                                            <Button className=\"listButtons\" onClick={this.finalizeConfirm}>\n                                                Finalize Results\n                                            </Button>\n                                        </Tooltip>\n                                    </div>\n\n                                </div>\n                            </div>\n                        </div>\n                    )\n                }\n                <br />\n                <Button\n                    variant=\"contained\"\n                    className=\"buttons\"\n                    type=\"button\"\n                    onClick={this.goBack}\n                >\n                    Back\n                </Button>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}