{"ast":null,"code":"import _classCallCheck from \"/Users/chenjiayuan/CS3312/talli/talli-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chenjiayuan/CS3312/talli/talli-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chenjiayuan/CS3312/talli/talli-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chenjiayuan/CS3312/talli/talli-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chenjiayuan/CS3312/talli/talli-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chenjiayuan/CS3312/talli/talli-app/client/src/components/OrganizerView/ViewEvent.js\";\nimport React, { Component } from 'react';\nimport { Typography, Button, TextField, Tooltip } from '@material-ui/core';\nimport openSocket from 'socket.io-client';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport firebase from '../../firebase';\nimport ExportOrgData from './Dialogs/ExportOrgData';\nimport EditEntries from './Dialogs/EditEntries';\nimport EditEvent from './Dialogs/EditEvent';\nimport EditVoting from './Dialogs/EditVoting';\nimport AddEntries from './Dialogs/AddEntries';\nimport EditWeights from './Dialogs/EditWeights';\nimport AddBallot from './Dialogs/AddBallot';\nimport ShowError from './Dialogs/ShowError';\nimport ConfirmFinalize from './Dialogs/ConfirmFinalize';\nimport '../component_style/ViewEvent.css';\n\nvar config = require('../../config.json');\n\nvar socket = openSocket(config.Global.devMode ? \"http://localhost:\".concat(config.Global.serverPort) : \"\".concat(config.Global.sslEnabled ? \"https\" : \"http\", \"://\").concat(config.Global.hostURL, \":\").concat(config.Global.serverPort));\n/**\r\n * OrganizerView > ViewEvent\r\n * Allows organizers to view the details of an event\r\n * that they have already created.\r\n */\n\nvar ViewEvent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ViewEvent, _Component);\n\n  function ViewEvent(props) {\n    var _this;\n\n    _classCallCheck(this, ViewEvent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewEvent).call(this, props));\n\n    _this.handleExport = function () {\n      _this.exportChild.current.handleOpen();\n    };\n\n    _this.handleOpenEntries = function () {\n      _this.setState({\n        view: 'entries',\n        event: _this.state.event\n      });\n    };\n\n    _this.handleAddEntry = function () {\n      _this.addChild.current.handleOpen();\n    };\n\n    _this.handleEventEdit = function () {\n      _this.eventChild.current.handleOpen();\n    };\n\n    _this.handleOpenCloseVoting = function () {\n      _this.votingChild.current.handleOpen();\n    };\n\n    _this.handleWeights = function () {\n      _this.weightsChild.current.handleOpen();\n    };\n\n    _this.handleError = function (message) {\n      if (_this.state.view === \"results\") {\n        _this.errorChild.current.handleOpen(message);\n      }\n\n      if (message === \"Could not get sheet information\" || message === \"Error with sheet authentication\") {\n        _this.setState({\n          view: _this.state.view,\n          event: _this.state.event,\n          urlConfirm: false\n        });\n      }\n    };\n\n    _this.handleAddVote = function () {\n      _this.addVoteChild.current.handleOpen();\n    };\n\n    _this.goBack = function () {\n      if (_this.state.view === 'main' || _this.state.view === 'results') {\n        _this.props.handler(_this.props.orgViews.MAIN);\n      } else if (_this.state.view === 'entries') {\n        _this.setState({\n          view: 'main',\n          event: _this.state.event\n        });\n      }\n    };\n\n    _this.viewResults = function () {\n      _this.setState({\n        view: 'results'\n      });\n    };\n\n    _this.manageEvent = function () {\n      _this.setState({\n        view: 'main'\n      });\n    };\n\n    _this.finalizeConfirm = function () {\n      _this.finalizeChild.current.handleOpen();\n    };\n\n    _this.finalizeResults = function () {\n      socket.emit('finalize_results', {\n        googleId: _this.props.user.googleId,\n        eventId: _this.state.event.id\n      });\n    };\n\n    _this.handleURLChange = function (e) {\n      e.preventDefault();\n      var newEvent = _this.state.event;\n      newEvent.sheetURL = e.target.value;\n\n      _this.setState({\n        view: _this.state.view,\n        event: newEvent\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      socket.emit('send_url', {\n        url: _this.state.event.sheetURL,\n        googleId: _this.props.user.googleId,\n        eventId: _this.state.event.id\n      });\n    };\n\n    _this.sendEntries = function () {\n      socket.emit('send_entries', {\n        googleId: _this.props.user.googleId,\n        eventId: _this.state.event.id,\n        entries: _this.state.event.entries\n      });\n    };\n\n    _this.refreshStats = function () {\n      firebase.database().ref(\"event/\".concat(_this.state.event.id, \"/\")).once('value').then(function (snap) {\n        var event = snap.val();\n\n        if (event.attendees) {\n          var totalBallots = Object.keys(event.attendees).length;\n          var totalSubmitted = 0;\n          var topVotes = {};\n          var sortVotes = [];\n\n          for (var user in event.attendees) {\n            if (event.attendees[user].submitted) {\n              totalSubmitted += 1;\n            }\n\n            for (var entry in event.attendees[user].rankings) {\n              if (!topVotes[entry]) {\n                topVotes[entry] = 0;\n              }\n\n              switch (event.attendees[user].rankings[entry]) {\n                case 1:\n                  topVotes[entry] += 3;\n                  break;\n\n                case 2:\n                  topVotes[entry] += 2;\n                  break;\n\n                case 3:\n                  topVotes[entry] += 1;\n                  break;\n\n                default:\n                  break;\n              }\n            }\n          }\n\n          for (var ballot in topVotes) {\n            sortVotes.push([ballot, topVotes[ballot]]);\n          }\n\n          sortVotes.sort(function (a, b) {\n            return b[1] - a[1];\n          });\n          var topThree = {\n            first: _this.state.event.entries[sortVotes[0][0]] ? _this.state.event.entries[sortVotes[0][0]].title : '',\n            second: _this.state.event.entries[sortVotes[1][0]] ? _this.state.event.entries[sortVotes[1][0]].title : '',\n            third: _this.state.event.entries[sortVotes[2][0]] ? _this.state.event.entries[sortVotes[2][0]].title : ''\n          };\n\n          _this.setState({\n            totalBallots: totalBallots,\n            totalSubmitted: totalSubmitted,\n            topThree: topThree\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      view: 'main',\n      event: {\n        id: '',\n        name: '',\n        location: '',\n        startDate: '',\n        endDate: '',\n        automate: false,\n        startVote: '',\n        endVote: '',\n        sheetURL: 'Google Sheet URL',\n        entries: []\n      },\n      urlConfirm: false\n    };\n    _this.exportChild = React.createRef();\n    _this.eventChild = React.createRef();\n    _this.entryChild = React.createRef();\n    _this.addChild = React.createRef();\n    _this.votingChild = React.createRef();\n    _this.weightsChild = React.createRef();\n    _this.addVoteChild = React.createRef();\n    _this.errorChild = React.createRef();\n    _this.finalizeChild = React.createRef();\n    return _this;\n  }\n\n  _createClass(ViewEvent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var googleId = this.props.user.googleId;\n      var query = firebase.database().ref(\"organizer/\".concat(googleId, \"/event\"));\n      query.on('value', function (snapshot) {\n        var events = snapshot.val();\n\n        if (events && events[_this2.props.curEvent]) {\n          var eventBase = events[_this2.props.curEvent].eventData;\n          var eventEntries = events[_this2.props.curEvent].entries;\n\n          _this2.setState({\n            view: _this2.state.view,\n            event: {\n              id: eventBase.id,\n              name: eventBase.name,\n              location: eventBase.location,\n              startDate: eventBase.startDate,\n              endDate: eventBase.endDate,\n              automate: eventBase.automate,\n              startVote: eventBase.startVote,\n              endVote: eventBase.endVote,\n              sheetURL: eventBase.sheetURL,\n              entries: eventEntries\n            },\n            urlConfirm: _this2.state.urlConfirm,\n            totalBallots: 0,\n            totalSubmitted: 0,\n            topThree: {\n              first: '',\n              second: '',\n              third: ''\n            }\n          }, function () {\n            _this2.refreshStats();\n\n            socket.emit('send_url', {\n              url: _this2.state.event.sheetURL,\n              googleId: _this2.props.user.googleId,\n              eventId: _this2.state.event.id\n            });\n          });\n        }\n      });\n      socket.on('error', function (data) {\n        console.log(data.error);\n\n        _this2.handleError(data.error);\n      });\n      socket.on('url_confirm', function () {\n        _this2.setState({\n          view: _this2.state.view,\n          event: _this2.state.event,\n          urlConfirm: true\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      socket.removeListener('error');\n    }\n  }, {\n    key: \"handleEntryEdit\",\n    value: function handleEntryEdit(entryID) {\n      this.entryChild.current.handleOpen(entryID);\n    }\n  }, {\n    key: \"keyPress\",\n    value: function keyPress(e) {\n      if (e.key === 'Enter') {\n        this.handleSubmit();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, this.props.user != null && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(ExportOrgData, {\n        ref: this.exportChild,\n        event: this.state.event,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }), React.createElement(EditEntries, {\n        ref: this.entryChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }), React.createElement(ConfirmFinalize, {\n        ref: this.finalizeChild,\n        handler: this.finalizeResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }), React.createElement(AddEntries, {\n        ref: this.addChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }), React.createElement(EditEvent, {\n        ref: this.eventChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        handler: this.props.handler,\n        orgViews: this.props.orgViews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }), React.createElement(AddBallot, {\n        ref: this.addVoteChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), React.createElement(EditVoting, {\n        ref: this.votingChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }), React.createElement(EditWeights, {\n        ref: this.weightsChild,\n        event: this.state.event,\n        googleId: this.props.user.googleId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }), React.createElement(ShowError, {\n        ref: this.errorChild,\n        event: this.state.event,\n        googleId: this.props.googleID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        variant: \"h3\",\n        align: \"center\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, this.state.event.name)), this.state.view === 'main' && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleExport,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, \"Export Event & Entry QR Codes\"), React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleOpenEntries,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"View/Add/Edit Entries\"), React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleEventEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, \"View/Edit Event Details\"), React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleOpenCloseVoting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"Open/Close Voting\"))), this.state.view === 'entries' && this.state.event.entries !== undefined && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, Object.values(this.state.event.entries).map(function (entry, index) {\n        return React.createElement(Button, {\n          key: index,\n          className: \"listButtons\",\n          onClick: function onClick() {\n            return _this3.handleEntryEdit(entry.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329\n          },\n          __self: this\n        }, entry.title, \" by \", entry.presenters);\n      }), React.createElement(Button, {\n        className: \"listButtons\",\n        color: \"primary\",\n        onClick: this.handleAddEntry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, \"Add New Entry\"))), this.state.view === 'entries' && this.state.event.entries === undefined && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"div\", {\n        className: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        color: \"primary\",\n        onClick: this.handleAddEntry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, \"Add New Entry\"))), this.state.view === \"results\" && React.createElement(\"div\", {\n        className: \"viewResults\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"options\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        onClick: this.manageEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, \"Manage Event\"), React.createElement(Button, {\n        className: \"button1\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.viewResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, \"View Results\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"saveItems\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sheetsExport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"instructions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        id: \"itemTitle\",\n        variant: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, \"Set Up Your Results\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"1. Create a Google Sheet in your desired location\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, \"2. Share the spreadsheet with editing rights with:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, \"talli-455@talli-229017.iam.gserviceaccount.com\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, \"3. Grab the spreadsheet's URL and paste it here:\", React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"urlField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"standard-dense\",\n        label: \"Spreadsheet URL\",\n        margin: \"dense\",\n        className: \"sheetURL\",\n        value: this.state.event.sheetURL,\n        onKeyDown: this.keyPress,\n        onChange: this.handleURLChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }), this.state.urlConfirm && React.createElement(CheckCircle, {\n        id: \"checkmark\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"default\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, \"Submit\")))), React.createElement(\"div\", {\n        className: \"statistics\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        id: \"itemTitle\",\n        variant: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, \"Voting Statistics\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"Total Ballots: \", this.state.totalBallots), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      }, \"Submitted Ballots: \", this.state.totalSubmitted), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, \"Current Top 3:\", React.createElement(\"div\", {\n        id: \"top3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, \"1. \", this.state.topThree.first), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, \"2. \", this.state.topThree.second), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, \"3. \", this.state.topThree.third))), React.createElement(\"div\", {\n        className: \"refreshButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        color: \"default\",\n        onClick: this.refreshStats,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412\n        },\n        __self: this\n      }, \"Refresh Statistics\")))), React.createElement(\"div\", {\n        className: \"bottomMenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Updates linked google sheet with current list of entries. It's best to do this before the event starts!\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.sendEntries,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424\n        },\n        __self: this\n      }, \"Sync entries\"))), React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Adjust the weights applied to first, second, and third place votes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleWeights,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }, \"Apply Custom Weights\"))), React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Manually add a ballot to the results.\",\n        placement: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.handleAddVote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, \"Add Vote\"))), React.createElement(\"div\", {\n        className: \"resultsOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Updates linked google sheet with all voting ballots submitted or manually entered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"listButtons\",\n        onClick: this.finalizeConfirm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450\n        },\n        __self: this\n      }, \"Finalize Results\")))))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        className: \"buttons\",\n        type: \"button\",\n        onClick: this.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462\n        },\n        __self: this\n      }, \"Back\"));\n    }\n  }]);\n\n  return ViewEvent;\n}(Component);\n\nexport { ViewEvent as default };","map":{"version":3,"sources":["/Users/chenjiayuan/CS3312/talli/talli-app/client/src/components/OrganizerView/ViewEvent.js"],"names":["React","Component","Typography","Button","TextField","Tooltip","openSocket","CheckCircle","firebase","ExportOrgData","EditEntries","EditEvent","EditVoting","AddEntries","EditWeights","AddBallot","ShowError","ConfirmFinalize","config","require","socket","Global","devMode","serverPort","sslEnabled","hostURL","ViewEvent","props","handleExport","exportChild","current","handleOpen","handleOpenEntries","setState","view","event","state","handleAddEntry","addChild","handleEventEdit","eventChild","handleOpenCloseVoting","votingChild","handleWeights","weightsChild","handleError","message","errorChild","urlConfirm","handleAddVote","addVoteChild","goBack","handler","orgViews","MAIN","viewResults","manageEvent","finalizeConfirm","finalizeChild","finalizeResults","emit","googleId","user","eventId","id","handleURLChange","e","preventDefault","newEvent","sheetURL","target","value","handleSubmit","url","sendEntries","entries","refreshStats","database","ref","once","then","snap","val","attendees","totalBallots","Object","keys","length","totalSubmitted","topVotes","sortVotes","submitted","entry","rankings","ballot","push","sort","a","b","topThree","first","title","second","third","name","location","startDate","endDate","automate","startVote","endVote","createRef","entryChild","query","on","snapshot","events","curEvent","eventBase","eventData","eventEntries","data","console","log","error","removeListener","entryID","key","googleID","undefined","values","map","index","handleEntryEdit","presenters","keyPress"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Typography, Button, TextField, Tooltip } from '@material-ui/core';\r\nimport openSocket from 'socket.io-client';\r\nimport CheckCircle from '@material-ui/icons/CheckCircle';\r\nimport firebase from '../../firebase';\r\nimport ExportOrgData from './Dialogs/ExportOrgData';\r\nimport EditEntries from './Dialogs/EditEntries';\r\nimport EditEvent from './Dialogs/EditEvent';\r\nimport EditVoting from './Dialogs/EditVoting';\r\nimport AddEntries from './Dialogs/AddEntries';\r\nimport EditWeights from './Dialogs/EditWeights';\r\nimport AddBallot from './Dialogs/AddBallot';\r\nimport ShowError from './Dialogs/ShowError';\r\nimport ConfirmFinalize from './Dialogs/ConfirmFinalize';\r\nimport '../component_style/ViewEvent.css';\r\n\r\nconst config = require('../../config.json');\r\n\r\nconst socket = openSocket(\r\n    (config.Global.devMode ?\r\n        `http://localhost:${config.Global.serverPort}` :\r\n        `${(config.Global.sslEnabled ? \"https\" : \"http\")}://${config.Global.hostURL}:${config.Global.serverPort}`\r\n    )\r\n);\r\n\r\n/**\r\n * OrganizerView > ViewEvent\r\n * Allows organizers to view the details of an event\r\n * that they have already created.\r\n */\r\nexport default class ViewEvent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            view: 'main',\r\n            event: {\r\n                id: '',\r\n                name: '',\r\n                location: '',\r\n                startDate: '',\r\n                endDate: '',\r\n                automate: false,\r\n                startVote: '',\r\n                endVote: '',\r\n                sheetURL: 'Google Sheet URL',\r\n                entries: []\r\n            },\r\n            urlConfirm: false,\r\n        };\r\n        this.exportChild = React.createRef();\r\n        this.eventChild = React.createRef();\r\n        this.entryChild = React.createRef();\r\n        this.addChild = React.createRef();\r\n        this.votingChild = React.createRef();\r\n        this.weightsChild = React.createRef();\r\n        this.addVoteChild = React.createRef();\r\n        this.errorChild = React.createRef();\r\n        this.finalizeChild = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const googleId = this.props.user.googleId;\r\n        const query = firebase.database().ref(`organizer/${googleId}/event`);\r\n        query.on('value', (snapshot) => {\r\n            const events = snapshot.val();\r\n            if (events && events[this.props.curEvent]) {\r\n                const eventBase = events[this.props.curEvent].eventData;\r\n                const eventEntries = events[this.props.curEvent].entries;\r\n                this.setState({\r\n                    view: this.state.view,\r\n                    event: {\r\n                        id: eventBase.id,\r\n                        name: eventBase.name,\r\n                        location: eventBase.location,\r\n                        startDate: eventBase.startDate,\r\n                        endDate: eventBase.endDate,\r\n                        automate: eventBase.automate,\r\n                        startVote: eventBase.startVote,\r\n                        endVote: eventBase.endVote,\r\n                        sheetURL: eventBase.sheetURL,\r\n                        entries: eventEntries\r\n                    },\r\n                    urlConfirm: this.state.urlConfirm,\r\n                    totalBallots: 0,\r\n                    totalSubmitted: 0,\r\n                    topThree: {\r\n                        first: '',\r\n                        second: '',\r\n                        third: ''\r\n                    }\r\n                }, () => {\r\n                    this.refreshStats();\r\n                    socket.emit('send_url', {\r\n                        url: this.state.event.sheetURL,\r\n                        googleId: this.props.user.googleId,\r\n                        eventId: this.state.event.id,\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        socket.on('error', (data) => {\r\n            console.log(data.error);\r\n            this.handleError(data.error);\r\n        });\r\n\r\n        socket.on('url_confirm', () => {\r\n            this.setState({\r\n                view: this.state.view,\r\n                event: this.state.event,\r\n                urlConfirm: true,\r\n            });\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        socket.removeListener('error');\r\n    }\r\n\r\n    handleExport = () => {\r\n        this.exportChild.current.handleOpen();\r\n    }\r\n\r\n    handleEntryEdit(entryID) {\r\n        this.entryChild.current.handleOpen(entryID);\r\n    }\r\n\r\n    handleOpenEntries = () => {\r\n        this.setState({\r\n            view: 'entries',\r\n            event: this.state.event\r\n        });\r\n    }\r\n\r\n    handleAddEntry = () => {\r\n        this.addChild.current.handleOpen();\r\n    }\r\n\r\n    handleEventEdit = () => {\r\n        this.eventChild.current.handleOpen();\r\n    }\r\n\r\n    handleOpenCloseVoting = () => {\r\n        this.votingChild.current.handleOpen();\r\n    }\r\n\r\n    handleWeights = () => {\r\n        this.weightsChild.current.handleOpen();\r\n    }\r\n\r\n    handleError = (message) => {\r\n        if (this.state.view === \"results\") {\r\n            this.errorChild.current.handleOpen(message);\r\n        }\r\n        if (message === \"Could not get sheet information\" || message === \"Error with sheet authentication\") {\r\n            this.setState({\r\n                view: this.state.view,\r\n                event: this.state.event,\r\n                urlConfirm: false,\r\n            });\r\n        }\r\n    }\r\n\r\n    handleAddVote = () => {\r\n        this.addVoteChild.current.handleOpen();\r\n    }\r\n\r\n    goBack = () => {\r\n        if (this.state.view === 'main' || this.state.view === 'results') {\r\n            this.props.handler(this.props.orgViews.MAIN);\r\n        } else if (this.state.view === 'entries') {\r\n            this.setState({\r\n                view: 'main',\r\n                event: this.state.event\r\n            });\r\n        }\r\n    }\r\n\r\n    viewResults = () => {\r\n        this.setState({\r\n            view: 'results'\r\n        });\r\n    }\r\n\r\n    manageEvent = () => {\r\n        this.setState({\r\n            view: 'main'\r\n        });\r\n    }\r\n\r\n    finalizeConfirm = () => {\r\n        this.finalizeChild.current.handleOpen();\r\n    }\r\n\r\n    finalizeResults = () => {\r\n        socket.emit('finalize_results', {\r\n            googleId: this.props.user.googleId,\r\n            eventId: this.state.event.id\r\n        });\r\n    }\r\n\r\n    keyPress(e) {\r\n        if (e.key === 'Enter') {\r\n            this.handleSubmit();\r\n        }\r\n    }\r\n\r\n    handleURLChange = (e) => {\r\n        e.preventDefault();\r\n        const newEvent = this.state.event;\r\n        newEvent.sheetURL = e.target.value;\r\n        this.setState({\r\n            view: this.state.view,\r\n            event: newEvent\r\n        });\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        socket.emit('send_url', {\r\n            url: this.state.event.sheetURL,\r\n            googleId: this.props.user.googleId,\r\n            eventId: this.state.event.id,\r\n        });\r\n    }\r\n\r\n    sendEntries = () => {\r\n        socket.emit('send_entries', {\r\n            googleId: this.props.user.googleId,\r\n            eventId: this.state.event.id,\r\n            entries: this.state.event.entries\r\n        });\r\n    }\r\n\r\n    refreshStats = () => {\r\n        firebase.database().ref(`event/${this.state.event.id}/`).once('value').then(snap => {\r\n            const event = snap.val();\r\n            if (event.attendees) {\r\n                const totalBallots = Object.keys(event.attendees).length;\r\n                let totalSubmitted = 0;\r\n                const topVotes = {};\r\n                const sortVotes = [];\r\n                for (let user in event.attendees) {\r\n                    if (event.attendees[user].submitted) {\r\n                        totalSubmitted += 1;\r\n                    }\r\n                    for (let entry in event.attendees[user].rankings) {\r\n                        if (!topVotes[entry]) {\r\n                            topVotes[entry] = 0;\r\n                        }\r\n                        switch (event.attendees[user].rankings[entry]) {\r\n                            case 1:\r\n                                topVotes[entry] += 3;\r\n                                break;\r\n                            case 2:\r\n                                topVotes[entry] += 2;\r\n                                break;\r\n                            case 3:\r\n                                topVotes[entry] += 1;\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n                for (let ballot in topVotes) {\r\n                    sortVotes.push([ballot, topVotes[ballot]]);\r\n                }\r\n                sortVotes.sort((a, b) => b[1] - a[1]);\r\n                const topThree = {\r\n                    first: this.state.event.entries[sortVotes[0][0]] ? this.state.event.entries[sortVotes[0][0]].title : '',\r\n                    second: this.state.event.entries[sortVotes[1][0]] ? this.state.event.entries[sortVotes[1][0]].title : '',\r\n                    third: this.state.event.entries[sortVotes[2][0]] ? this.state.event.entries[sortVotes[2][0]].title : '',\r\n                };\r\n                this.setState({\r\n                    totalBallots,\r\n                    totalSubmitted,\r\n                    topThree\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"main\">\r\n                {\r\n                    this.props.user != null && (\r\n                        <div>\r\n                            <ExportOrgData ref={this.exportChild} event={this.state.event} />\r\n                            <EditEntries ref={this.entryChild} event={this.state.event} googleId={this.props.user.googleId} />\r\n                            <ConfirmFinalize ref={this.finalizeChild} handler={this.finalizeResults} />\r\n                            <AddEntries ref={this.addChild} event={this.state.event} googleId={this.props.user.googleId} />\r\n                            <EditEvent ref={this.eventChild} event={this.state.event} googleId={this.props.user.googleId} handler={this.props.handler} orgViews={this.props.orgViews} />\r\n                            <AddBallot ref={this.addVoteChild} event={this.state.event} googleId={this.props.user.googleId} />\r\n                            <EditVoting ref={this.votingChild} event={this.state.event} googleId={this.props.user.googleId} />\r\n                            <EditWeights ref={this.weightsChild} event={this.state.event} googleId={this.props.user.googleId} />\r\n                            <ShowError ref={this.errorChild} event={this.state.event} googleId={this.props.googleID} />\r\n                            <Typography variant=\"h3\" align=\"center\" gutterBottom>{this.state.event.name}</Typography>\r\n                        </div>\r\n                    )\r\n                }\r\n                {\r\n                    this.state.view === 'main' && (\r\n                        <div>\r\n                            <div className=\"options\">\r\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.manageEvent}>Manage Event</Button>\r\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.viewResults}>View Results</Button>\r\n                            </div>\r\n                            <div className=\"box\">\r\n                                <Button className=\"listButtons\" onClick={this.handleExport}>Export Event & Entry QR Codes</Button>\r\n                                <Button className=\"listButtons\" onClick={this.handleOpenEntries}>View/Add/Edit Entries</Button>\r\n                                <Button className=\"listButtons\" onClick={this.handleEventEdit}>View/Edit Event Details</Button>\r\n                                <Button className=\"listButtons\" onClick={this.handleOpenCloseVoting}>Open/Close Voting</Button>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n                {\r\n                    this.state.view === 'entries' && this.state.event.entries !== undefined && (\r\n                        <div>\r\n                            <div className=\"options\">\r\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.manageEvent}>Manage Event</Button>\r\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.viewResults}>View Results</Button>\r\n                            </div>\r\n                            <div className=\"box\">\r\n                                {\r\n                                    Object.values(this.state.event.entries).map((entry, index) => (\r\n                                        <Button key={index} className=\"listButtons\" onClick={() => this.handleEntryEdit(entry.id)}>\r\n                                            {entry.title} by {entry.presenters}\r\n                                        </Button>\r\n                                    ))\r\n                                }\r\n                                <Button className=\"listButtons\" color=\"primary\" onClick={this.handleAddEntry}>Add New Entry</Button>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n                {\r\n                    this.state.view === 'entries' && this.state.event.entries === undefined && (\r\n                        <div>\r\n                            <div className=\"options\">\r\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.manageEvent}>Manage Event</Button>\r\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.viewResults}>View Results</Button>\r\n                            </div>\r\n                            <div className=\"box\">\r\n                                <Button className=\"listButtons\" color=\"primary\" onClick={this.handleAddEntry}>Add New Entry</Button>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n                {\r\n                    this.state.view === \"results\" && (\r\n                        <div className=\"viewResults\">\r\n                            <div className=\"options\">\r\n                                <Button className=\"button1\" variant=\"contained\" onClick={this.manageEvent}>Manage Event</Button>\r\n                                <Button className=\"button1\" variant=\"contained\" color=\"primary\" onClick={this.viewResults}>View Results</Button>\r\n                            </div>\r\n                            <br />\r\n                            <div className=\"saveItems\">\r\n                                <div className=\"sheetsExport\">\r\n                                    <div className=\"instructions\">\r\n                                        <Typography id=\"itemTitle\" variant=\"h5\">Set Up Your Results</Typography>\r\n                                        <div>1. Create a Google Sheet in your desired location</div>\r\n                                        <div>\r\n                                            2. Share the spreadsheet with editing rights with:\r\n                                        <br />\r\n                                            <div className=\"main\">\r\n                                                <b>talli-455@talli-229017.iam.gserviceaccount.com</b>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div>\r\n                                            3. Grab the spreadsheet&apos;s URL and paste it here:\r\n                                            <div className=\"main\">\r\n                                                <div className=\"urlField\">\r\n                                                    <TextField\r\n                                                        id=\"standard-dense\"\r\n                                                        label=\"Spreadsheet URL\"\r\n                                                        margin=\"dense\"\r\n                                                        className=\"sheetURL\"\r\n                                                        value={this.state.event.sheetURL}\r\n                                                        onKeyDown={this.keyPress}\r\n                                                        onChange={this.handleURLChange}\r\n                                                    />\r\n                                                    {\r\n                                                        this.state.urlConfirm &&\r\n                                                        <CheckCircle id=\"checkmark\" color=\"primary\" />\r\n                                                    }\r\n                                                    <br />\r\n                                                </div>\r\n                                                <Button variant=\"contained\" size=\"small\" color=\"default\" onClick={this.handleSubmit}>\r\n                                                    Submit\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n\r\n                                    <div className=\"statistics\">\r\n                                        <Typography id=\"itemTitle\" variant=\"h5\">Voting Statistics</Typography>\r\n                                        <div>Total Ballots: {this.state.totalBallots}</div>\r\n                                        <div>Submitted Ballots: {this.state.totalSubmitted}</div>\r\n                                        <div>\r\n                                            Current Top 3:\r\n                                            <div id=\"top3\">\r\n                                                <div>1. {this.state.topThree.first}</div>\r\n                                                <div>2. {this.state.topThree.second}</div>\r\n                                                <div>3. {this.state.topThree.third}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"refreshButton\">\r\n                                            <Button variant=\"contained\" size=\"small\" color=\"default\" onClick={this.refreshStats}>\r\n                                                Refresh Statistics\r\n                                        </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"bottomMenu\">\r\n                                    <div className=\"resultsOption\">\r\n                                        <Tooltip\r\n                                            title=\"Updates linked google sheet with current list of entries. It's best to do this before the event starts!\"\r\n                                            placement=\"bottom\"\r\n                                        >\r\n                                            <Button className=\"listButtons\" onClick={this.sendEntries}>\r\n                                                Sync entries\r\n                                            </Button>\r\n                                        </Tooltip>\r\n                                    </div>\r\n                                    <div className=\"resultsOption\">\r\n                                        <Tooltip\r\n                                            title=\"Adjust the weights applied to first, second, and third place votes\"\r\n                                        >\r\n                                            <Button className=\"listButtons\" onClick={this.handleWeights}>Apply Custom Weights</Button>\r\n                                        </Tooltip>\r\n                                    </div>\r\n                                    <div className=\"resultsOption\">\r\n                                        <Tooltip\r\n                                            title=\"Manually add a ballot to the results.\"\r\n                                            placement=\"bottom\"\r\n                                        >\r\n                                            <Button className=\"listButtons\" onClick={this.handleAddVote}>\r\n                                                Add Vote\r\n                                            </Button>\r\n                                        </Tooltip>\r\n                                    </div>\r\n                                    <div className=\"resultsOption\">\r\n                                        <Tooltip\r\n                                            title=\"Updates linked google sheet with all voting ballots submitted or manually entered\"\r\n                                        >\r\n                                            <Button className=\"listButtons\" onClick={this.finalizeConfirm}>\r\n                                                Finalize Results\r\n                                            </Button>\r\n                                        </Tooltip>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n                <br />\r\n                <Button\r\n                    variant=\"contained\"\r\n                    className=\"buttons\"\r\n                    type=\"button\"\r\n                    onClick={this.goBack}\r\n                >\r\n                    Back\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}